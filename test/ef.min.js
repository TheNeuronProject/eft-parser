!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ef=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function n(e,t,n){var o=t[n];if(void 0!==o&&null!==o){if(De.call(e,n)&&(void 0===e[n]||null===e[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");De.call(e,n)&&We(o)?e[n]=r(Object(e[n]),t[n]):e[n]=o}}function r(e,t){if(e===t)return e;t=Object(t);for(var r in t)De.call(t,r)&&n(e,t,r);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),a=0;a<o.length;a++)Ue.call(t,o[a])&&n(e,t,o[a]);return e}var o=Object.prototype.toString,a=function(e){var t=o.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===o.call(e.callee)),n},i=Object.prototype.hasOwnProperty,c=Object.prototype.toString,u=Array.prototype.slice,l=a,s=Object.prototype.propertyIsEnumerable,f=!s.call({toString:null},"toString"),p=s.call(function(){},"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],v=function(e){var t=e.constructor;return t&&t.prototype===e},b={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!b["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{v(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),g=function(e){if("undefined"==typeof window||!h)return v(e);try{return v(e)}catch(e){return!1}},y=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===c.call(e),r=l(e),o=t&&"[object String]"===c.call(e),a=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var u=p&&n;if(o&&e.length>0&&!i.call(e,0))for(var s=0;s<e.length;++s)a.push(String(s));if(r&&e.length>0)for(var v=0;v<e.length;++v)a.push(String(v));else for(var b in e)u&&"prototype"===b||!i.call(e,b)||a.push(String(b));if(f)for(var h=g(e),y=0;y<d.length;++y)h&&"constructor"===d[y]||!i.call(e,d[y])||a.push(d[y]);return a};y.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var e=Object.keys;Object.keys=function(t){return e(l(t)?u.call(t):t)}}}else Object.keys=y;return Object.keys||y};var m=y,w=Object.prototype.hasOwnProperty,O=Object.prototype.toString,j=function(e,t,n){if("[object Function]"!==O.call(t))throw new TypeError("iterator must be a function");var r=e.length;if(r===+r)for(var o=0;o<r;o++)t.call(n,e[o],o,e);else for(var a in e)w.call(e,a)&&t.call(n,e[a],a,e)},x=m,$=j,N="function"==typeof Symbol&&"symbol"==typeof Symbol(),_=Object.prototype.toString,S=function(e){return"function"==typeof e&&"[object Function]"===_.call(e)},E=Object.defineProperty&&function(){var e={};try{Object.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(e){return!1}}(),k=function(e,t,n,r){(!(t in e)||S(r)&&r())&&(E?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},P=function(e,t){var n=arguments.length>2?arguments[2]:{},r=x(t);N&&(r=r.concat(Object.getOwnPropertySymbols(t))),$(r,function(r){k(e,r,t[r],n[r])})};P.supportsDescriptors=!!E;var T=P,A=Array.prototype.slice,C=Object.prototype.toString,F=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==C.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,r=A.call(arguments,1),o=function(){if(this instanceof n){var o=t.apply(this,r.concat(A.call(arguments)));return Object(o)===o?o:this}return t.apply(e,r.concat(A.call(arguments)))},a=Math.max(0,t.length-r.length),i=[],c=0;c<a;c++)i.push("$"+c);if(n=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var u=function(){};u.prototype=t.prototype,n.prototype=new u,u.prototype=null}return n},L=F,I=Function.prototype.bind||L,R=m,M=m,W=I,D=function(e){return void 0!==e&&null!==e},U=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;e[t]=42;for(t in e)return!1;if(0!==R(e).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||o.enumerable!==!0)return!1}return!0}(),H=Object,B=W.call(Function.call,Array.prototype.push),z=W.call(Function.call,Object.prototype.propertyIsEnumerable),q=U?Object.getOwnPropertySymbols:null,Y=function(e,t){var n=arguments;if(!D(e))throw new TypeError("target must be an object");var r,o,a,i,c,u,l,s=H(e);for(r=1;r<arguments.length;++r){o=H(n[r]),i=M(o);var f=U&&(Object.getOwnPropertySymbols||q);if(f)for(c=f(o),a=0;a<c.length;++a)l=c[a],z(o,l)&&B(i,l);for(a=0;a<i.length;++a)l=i[a],u=o[l],z(o,l)&&(s[l]=u)}return s},J=Y,V=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var o=Object.assign({},n),a="";for(var i in o)a+=i;return e!==a},X=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1},G=function(){return Object.assign?V()?J:X()?J:Object.assign:J},K=T,Q=G,Z=function(){var e=Q();return K(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},ee=T,te=Y,ne=G,re=Z,oe=ne();ee(oe,{implementation:te,getPolyfill:ne,shim:re});var ae=oe,ie="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ce=e(function(e){!function(){function t(e){e.permitHostObjects___&&e.permitHostObjects___(t)}function n(e){return!(e.substr(0,d.length)==d&&"___"===e.substr(e.length-3))}function r(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[v];if(t&&t.key===e)return t;if(p(e)){t={key:e};try{return f(e,v,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function o(e){return e.prototype=null,Object.freeze(e)}function a(){y||"undefined"==typeof console||(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=t);var i=!1;if("function"==typeof WeakMap){var c=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var u=new c,l=Object.freeze({});if(u.set(l,1),1===u.get(l))return void(e.exports=WeakMap);i=!0}}var s=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),f=Object.defineProperty,p=Object.isExtensible,d="weakmap:",v=d+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var b=new ArrayBuffer(25),h=new Uint8Array(b);crypto.getRandomValues(h),v=d+"rand:"+Array.prototype.map.call(h,function(e){return(e%36).toString(36)}).join("")+"___"}if(f(Object,"getOwnPropertyNames",{value:function(e){return s(e).filter(n)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(e){return g(e).filter(n)}})}!function(){var e=Object.freeze;f(Object,"freeze",{value:function(t){return r(t),e(t)}});var t=Object.seal;f(Object,"seal",{value:function(e){return r(e),t(e)}});var n=Object.preventExtensions;f(Object,"preventExtensions",{value:function(e){return r(e),n(e)}})}();var y=!1,m=0,w=function(){function e(e,t){var n,o=r(e);return o?l in o?o[l]:t:(n=c.indexOf(e),n>=0?u[n]:t)}function t(e){var t=r(e);return t?l in t:c.indexOf(e)>=0}function n(e,t){var n,o=r(e);return o?o[l]=t:(n=c.indexOf(e),n>=0?u[n]=t:(n=c.length,u[n]=t,c[n]=e)),this}function i(e){var t,n,o=r(e);return o?l in o&&delete o[l]:!((t=c.indexOf(e))<0)&&(n=c.length-1,c[t]=void 0,u[t]=u[n],c[t]=c[n],c.length=n,u.length=n,!0)}this instanceof w||a();var c=[],u=[],l=m++;return Object.create(w.prototype,{get___:{value:o(e)},has___:{value:o(t)},set___:{value:o(n)},delete___:{value:o(i)}})};w.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof c?function(){function n(){function e(e,t){return s?l.has(e)?l.get(e):s.get___(e,t):l.get(e,t)}function n(e){return l.has(e)||!!s&&s.has___(e)}function r(e){var t=!!l.delete(e);return s?s.delete___(e)||t:t}this instanceof w||a();var u,l=new c,s=void 0,f=!1;return u=i?function(e,t){return l.set(e,t),l.has(e)||(s||(s=new w),s.set(e,t)),this}:function(e,t){if(f)try{l.set(e,t)}catch(n){s||(s=new w),s.set___(e,t)}else l.set(e,t);return this},Object.create(w.prototype,{get___:{value:o(e)},has___:{value:o(n)},set___:{value:o(u)},delete___:{value:o(r)},permitHostObjects___:{value:o(function(e){if(e!==t)throw new Error("bogus call to permitHostObjects___");f=!0})}})}i&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=w.prototype,e.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=w)}}()}),ue=function(e,t,n){return Object.defineProperty(e,t,{value:n})};Object.assign||ue(Object,"assign",ae),window.WeakMap||ue(window,"WeakMap",ce);var le=e(function(e){!function(t,n){"function"==typeof define&&define.amd?define(n):"object"==typeof e&&e.exports?e.exports=n():t.log=n()}(ie,function(){function e(e){return typeof console!==c&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):i)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==c&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=this,r=0;r<u.length;r++){var o=u[r];n[o]=r<e?i:n.methodFactory(o,e,t)}}function o(t,r,o){return e(t)||n.apply(this,arguments)}function a(e,t,n){function a(e){var t=(u[e]||"silent").toUpperCase();try{return void(window.localStorage[f]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+t+";"}catch(e){}}function i(){var e;try{e=window.localStorage[f]}catch(e){}if(typeof e===c)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(f)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}var l,s=this,f="loglevel";e&&(f+=":"+e),s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=n||o,s.getLevel=function(){return l},s.setLevel=function(t,n){if("string"==typeof t&&void 0!==s.levels[t.toUpperCase()]&&(t=s.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(l=t,n!==!1&&a(t),r.call(s,t,e),typeof console===c&&t<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){i()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var p=i();null==p&&(p=null==t?"WARN":t),s.setLevel(p,!1)}var i=function(){},c="undefined",u=["trace","debug","info","warn","error"],l=new a,s={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=s[e];return t||(t=s[e]=new a(e,l.getLevel(),l.methodFactory)),t};var f=typeof window!==c?window.log:void 0;return l.noConflict=function(){return typeof window!==c&&window.log===l&&(window.log=f),l},l})}),se="[EF]",fe=le.getLogger("ef"),pe=(fe.trace.bind(null,se),fe.debug.bind(null,se),fe.info.bind(null,se)),de=fe.warn.bind(null,se),ve=fe.error.bind(null,se),be=function(e){return ve("Detatch the component before attaching it to a new component! Component to be detatched:",e)};fe.setLevel("error"),pe("Debug logging enabled!");var he=new RegExp("\\&b","g"),ge=new RegExp("\\&t","g"),ye=new RegExp("\\&n","g"),me=new RegExp("\\&v","g"),we=new RegExp("\\&f","g"),Oe=new RegExp("\\&r","g"),je=new RegExp("\\&u.{0,4}","g"),xe=new RegExp("\\&x.{0,2}","g"),$e=new RegExp("\\&","g"),Ne=function(e){if(e=e.substring(2),!(e=parseInt(e,16)))throw new SyntaxError("Invalid Unicode escape sequence");return String.fromCodePoint(e)},_e=function(e){if(e="00"+e.substring(2),!(e=parseInt(e,16)))throw new SyntaxError("Invalid hexadecimal escape sequence");return String.fromCodePoint(e)},Se=function(e){for(var t=e.split("&&"),n=[],r=0,o=t;r<o.length;r+=1){var a=o[r],i=a.replace(he,"\b").replace(ge,"\t").replace(ye,"\n").replace(me,"\v").replace(we,"\f").replace(Oe,"\r").replace(je,Ne).replace(xe,_e).replace($e,"");n.push(i)}return n.join("&")},Ee=">#%@.-+".split(""),ke="attached data element methods subscribe unsubscribe update".split(" ").map(function(e){return"$"+e}),Pe=/^\{\{.*\}\}$/,Te=function(e,t){return void 0===t&&(t=-2),"Failed to parse eft template: "+e+". at line "+(parseInt(t,10)+1)},Ae=function(e){var t=0,n=e=e.replace(/^\t+/,function(e){return t=e.length,""});return{depth:t,content:n}},Ce=function(e,t){for(var n=e,r=0;r<t;r++)n=n[n.length-1];return n},Fe=function(e){var t=e.split("="),n=t.shift().trim(),r=t.join("=").trim();return Pe.test(r)?{name:n,value:r.substr(2,r.length-4).split(".")}:{name:n,value:r}},Le=function(e){var t=[],n=e.match(/\{\{.+?\}\}/g);if(n)for(var r=e.split(/\{\{.+?\}\}/g),o=0;o<r.length;o++)r[o]&&t.push(Se(r[o])),n[o]&&t.push(n[o].substr(2,n[o].length-4).trim().split("."));else t.push(e);return t},Ie=function(e){if(!e)throw new TypeError(Te("Template required, but nothing present"));var t=Object.prototype.toString.call(e);if("[object String]"!==t)throw new TypeError(Te("Expected a string, but got an "+t));var n=e.split(/\r?\n/),r=[],o=0,a=0,i="comment",c=r,u=!1;for(var l in n){var s=Ae(n[l]),f=s.depth,p=s.content;if(p){if(f<a||f-o>1||f-o==1&&["comment","tag"].indexOf(i)===-1||f===a&&u)throw new SyntaxError(Te("Indent grater than "+(a-1)+" and less than "+(o+2)+" expected, but got "+f,l));var d=p[0];if(p=p.slice(1),!u&&Ee.indexOf(d)>=0&&">"!==d)throw new SyntaxError(Te("No top level entry",l));if(!p&&Ee.indexOf(d)>=0)throw new SyntaxError(Te("Empty content",l));switch((f<o||f===o&&"tag"===i)&&(c=Ce(r,f)),o=f,d){case">":u||(u=!0,a=f),i="tag";var v=[{tag:p,attr:{},prop:{},event:{}}];c.push(v),c=v;break;case"#":i="attr";var b=Fe(p),h=b.name,g=b.value;c[0].attr[h]=g;break;case"%":i="prop";var y=Fe(p),m=y.name,w=y.value;c[0].prop[m]=w;break;case"@":i="event";var O=Fe(p),j=O.name,x=O.value;if("string"!=typeof x)throw new SyntaxError(Te("Methods should not be wrapped in mustaches",l));c[0].event[j]=x;break;case".":i="text";var $=Le(p);c.push.apply(c,$);break;case"-":if(ke.indexOf(p)!==-1)throw new SyntaxError(Te("No reserved name '"+p+"' should be used",l));i="node",c.push({name:p,type:"node"});break;case"+":i="list",c.push({name:p,type:"list"});break;default:i="comment"}}}if(r[0])return r[0];throw new SyntaxError(Te("Nothing to be parsed",n.length-1))},Re=function(e,t){return t||(t=Ie),t(e)},Me=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)},We=Me,De=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,He=function(e){var n=arguments;e=t(e);for(var o=1;o<arguments.length;o++)r(e,n[o]);return e},Be=Array.prototype,ze={copy:function(e){return Be.slice.call(e,0)},fullCopy:function(e){return JSON.parse(JSON.stringify(e))},pop:function(e){return Be.pop.call(e)},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Be.push.apply(e,t)},remove:function(e,t){var n=Be.indexOf.call(e,t);if(n>-1)return Be.splice.call(e,n,1),t},reverse:function(e){return Be.reverse.call(e)},shift:function(e){return Be.shift.call(e)},slice:function(e,t,n){return Be.slice.call(e,t,n)},sort:function(e,t){return Be.sort.call(e,t)},splice:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Be.splice.apply(e,t)},unshift:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Be.unshift.apply(e,t)}},qe=function(e){var t=Object.prototype.toString.call(e).split(" ")[1];return t.substr(0,t.length-1).toLowerCase()},Ye=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var o=r[n];if(!t[o]){var a={};Object.defineProperty(t,o,{get:function(){return a},set:function(e){He(a,e)},enumerable:!0})}t=t[o]}return t},Je=function(e){var t=e.path,n=e.name,r=e.parentNode,o=e.subscriberNode;return t.length>0&&(r=Ye(t,r),o=Ye(t,o)),o[n]=o[n]||[],o=o[n],o.value=o.value||"",{parentNode:r,subscriberNode:o}},Ve=function(e,t){if("array"===qe(e[e.length-1])){var n=e.pop()[0],r=ze.copy(e),o=r.pop();Ye(r,t)[o]=n}},Xe=function(e){var t=e.subscriberNode,n=e.parentNode,r=e.name,o=e.state;void 0===n[r]&&Object.defineProperty(n,r,{get:function(){return t.value},set:function(e){if(t.value!==e){t.value=e;for(var n=0,r=t;n<r.length;n+=1){r[n].call(o,e)}}},enumerable:!0})},Ge=function(e){var t=e.info,n=e.state,r=e.defaults,o=e.nodes,a=e.subscriber,i=document.createElement(t.tag);t.alias&&(o[t.alias]=i);for(var c in t.attr)!function(e){var o=t.attr[e];if("string"===qe(o))i.setAttribute(e,o);else{Ve(o,r);var c=o.pop(),u=Je({path:o,name:c,parentNode:n.$data,subscriberNode:a}),l=u.parentNode,s=u.subscriberNode;s.push(function(t){i.setAttribute(e,t)}),Xe({subscriberNode:s,parentNode:l,name:c,state:n})}}(c);for(var u in t.prop)!function(e){var o=t.prop[u];if("string"===qe(o))i[u]=o;else{Ve(o,r);var c=o.pop(),l=Je({path:o,name:c,parentNode:n.$data,subscriberNode:a}),s=l.parentNode,f=l.subscriberNode,p=function(e){i[u]=e};if(f.push(p),Xe({subscriberNode:f,parentNode:s,name:c,state:n}),"value"===u||"checked"===u){var d=function(e){if(f.value!==e){f.value=e;for(var t=0,r=f;t<r.length;t+=1){var o=r[t];o!==p&&o.call(n,e)}}};"value"===u?(i.addEventListener("input",function(){return d(i.value)},!1),i.addEventListener("change",function(){return d(i.value)},!1)):i.addEventListener("change",function(){return d(event.checked)},!1)}}}();for(var l in t.event)!function(e){var r=t.event[l];i.addEventListener(l,function(e){n.$methods[r]?n.$methods[r](n,e):de("No method named '"+r+"' found!")},!1)}();return i},Ke=Node.prototype,Qe={before:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(e.parentNode){var r=document.createDocumentFragment();t.reverse();for(var o=0,a=t;o<a.length;o+=1){var i=a[o];Ke.appendChild.call(r,i)}Ke.insertBefore.call(e.parentNode,r,e)}},after:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(e.parentNode){for(var r=document.createDocumentFragment(),o=0,a=t;o<a.length;o+=1){var i=a[o];Ke.appendChild.call(r,i)}e.nextSibling?Ke.insertBefore.call(e.parentNode,r,e.nextSibling):Ke.appendChild.call(e.parentNode,r)}},append:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if([1,9,11].indexOf(e.nodeType)!==-1){for(var r=document.createDocumentFragment(),o=0,a=t;o<a.length;o+=1){var i=a[o];Ke.appendChild.call(r,i)}Ke.appendChild.call(e,r)}},remove:function(e){Ke.removeChild.call(e.parentNode,e)}},Ze=new WeakMap,et={pop:function(){if(0!==this.length){var e=ze.pop(this);return Qe.remove(e.$element),e}},push:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=[],r=0,o=e;r<o.length;r+=1){var a=o[r];if(a.$attached)return be(a);ze.push(n,a.$element)}return 0===this.length?Qe.after.apply(Qe,[Ze.get(this)].concat(n)):Qe.after.apply(Qe,[this[this.length-1].$element].concat(n)),ze.push.apply(ze,[this].concat(e))},remove:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=[],o=0,a=t;o<a.length;o+=1){var i=a[o],c=ze.remove(e,i);c&&(Qe.remove(c),ze.push(r,c))}return r},reverse:function(){var e=this;if(0===this.length)return this;var t=document.createTextNode("");Qe.before(this[0].$element,t);for(var n=[],r=this.length-1;r>=0;r--)ze.push(n,e[r].$element);return Qe.after.apply(Qe,[t].concat(n)),Qe.remove(t),ze.reverse(this)},shift:function(){if(0!==this.length){var e=ze.shift(this);return Qe.remove(e.$element),e}},sort:function(e){var t=this;if(0===this.length)return this;var n=document.createTextNode("");Qe.before(this[0].$element,n);for(var r=ze.sort(this,e),o=[],a=0,i=t;a<i.length;a+=1){var c=i[a];ze.push(o,c.$element)}return Qe.after.apply(Qe,[n].concat(o)),Qe.remove(n),r},splice:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===this.length)return this;var r=document.createTextNode("");Qe.before(this[0].$element,r);for(var o=ze.splice.apply(ze,[this].concat(t)),a=[],i=0,c=o;i<c.length;i+=1){var u=c[i];Qe.remove(u.$element)}for(var l=0,s=e;l<s.length;l+=1){var f=s[l];ze.push(a,f.$element)}return Qe.after.apply(Qe,[r].concat(a)),Qe.remove(r),o},unshift:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(0===this.length)return(c=this).push.apply(c,e).length;var n=document.createTextNode("");Qe.before(this[0].$element,n);for(var r=[],o=0,a=e;o<a.length;o+=1){var i=a[o];if(i.$attached)return be(i);ze.push(r,i.$element)}return Qe.after.apply(Qe,[n].concat(r)),Qe.remove(n),ze.unshift.apply(ze,[this].concat(e));var c}},tt="attached data element nodes methods subscribe unsubscribe update".split(" ").map(function(e){return"$"+e}),nt=function(e){for(var t=e.ast,n=e.state,r=e.defaults,o=e.nodes,a=e.children,i=e.subscriber,c=Ge({info:t[0],state:n,defaults:r,nodes:o,subscriber:i}),u=1;u<t.length;u++)!function(e){var u=t[e],l=qe(u);switch(l){case"string":Qe.append(c,document.createTextNode(u));break;case"array":if("object"===qe(u[0]))Qe.append(c,nt({ast:u,state:n,defaults:r,nodes:o,children:a,subscriber:i}));else if("string"===qe(u[0])){Ve(u,r);var s=u.pop(),f=document.createTextNode(""),p=Je({path:u,name:s,parentNode:n.$data,subscriberNode:i}),d=p.parentNode,v=p.subscriberNode;v.push(function(e){f.textContent=e}),Xe({subscriberNode:v,parentNode:d,name:s,state:n}),Qe.append(c,f)}break;case"object":if(tt.indexOf(u.name)!==-1){de("No reserved name '"+u.name+"' should be used, ignoring.");break}var b=function(){return document.createTextNode("")}();if("node"===u.type)Object.defineProperty(n,u.name,{get:function(){return a[u.name]},set:function(e){if(!a[u.name]||a[u.name].value!==e){if(e.$attached)return be(e);a[u.name]&&Qe.remove(a[u.name].$element),Qe.after(b,e.$element),a[u.name]=e}},enumerable:!0});else{if("list"!==u.type)throw new TypeError("Not a standard ef.js AST: Unknown mounting point type '"+u.type+"'");var h=Object.assign([],et);Ze.set(h,b),a[u.name]=h,Object.defineProperty(n,u.name,{get:function(){return a[u.name]},set:function(e){if(!a[u.name]||a[u.name].value!==e){Ze.set(e,b);var t=document.createDocumentFragment();if(a[u.name]){for(var n=0,r=e;n<r.length;n+=1){var o=r[n];if(o.$attached)return be(o);Qe.append(t,o.$element),ze.remove(a[u.name],o)}for(var i=0,c=a[u.name];i<c.length;i+=1){var l=c[i];Qe.remove(l.$element)}}else for(var s=0,f=e;s<f.length;s+=1){var p=f[s];Qe.append(t,p.$element)}a[u.name]=Object.assign(e,et),Qe.after(b,t)}},enumerable:!0})}Qe.append(c,b);break;default:throw new TypeError("Not a standard ef.js AST: Unknown node type '"+l+"'")}}(u);return c},rt=function(e,t){var n=e.split("."),r=n.pop();return Ye(n,t)[r]},ot=function(e,t,n){var r=rt(e,n);r.indexOf(t)!==-1&&ze.remove(r,t)},at=function(){return!!this.$element.parentNode},it=function(e){var t=Object.assign({},e);t.$data&&(Object.assign(this.$data,t.$data),delete t.$data),t.$methods&&(Object.assign(this.$methods,t.$methods),delete t.$methods),Object.assign(this,t)},ct=function(e){e=ze.fullCopy(e);var t={},n={},r={},o={},a={},i={},c={};Object.defineProperties(t,{$data:{get:function(){return o},set:function(e){He(o,e)}},$methods:{get:function(){return i},set:function(e){He(i,e)}},$nodes:{get:function(){return Object.assign({},r)}},$subscribe:{value:function(e,n){var r=e.split("."),a=r.pop(),i=Je({path:r,name:a,parentNode:o,subscriberNode:c}),u=i.parentNode,l=i.subscriberNode;l.push(n),Xe({subscriberNode:l,parentNode:u,name:a,state:t})}},$unsubscribe:{value:function(e,t){ot(e,t,c)}},$attached:{get:at},$update:{value:it}});var u=nt({ast:e,state:t,defaults:a,nodes:r,children:n,subscriber:c});return t.$data=a,Object.defineProperty(t,"$element",{value:u}),t},ut=new WeakMap,lt=Ie,st=function(){function e(e){var t=Object.prototype.toString.call(e);if("[object String]"===t)e=Re(e,lt);else if("[object Array]"!==t)throw new TypeError("Cannot create new component without proper template or AST!");ut.set(this,e)}return e.prototype.render=function(e){var t=ct(ut.get(this));return e&&t.$update(e),t},e.setPatser=function(e){lt=e},e.parseEft=function(e){return Ie(e)},e}();return pe("ef.js v0.1.0-alpha.7.master.f93657f initialized!"),st});
